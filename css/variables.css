/* ============================================
   PRESS OR PERISH — CSS Variables & Base
   Papers Please aesthetic · 640×360 canvas
   ============================================ */

:root {
  /* — Paper & Ink — */
  --paper:        #e8dfc8;
  --paper-aged:   #d4c9a8;
  --paper-dark:   #c4b898;
  --ink:          #1a1208;
  --ink-faded:    #4a3f28;
  --ink-light:    #6b5f45;
  --ink-red:      #8b1a1a;

  /* — Desk & Environment — */
  --desk:         #2a1f12;
  --desk-light:   #3d2e1a;
  --desk-surface: #352816;
  --lamp:         #f5e4a0;
  --lamp-dim:     #d4c080;
  --shadow:       rgba(0, 0, 0, 0.4);

  /* — UI Accents — */
  --deficit-red:  #cc2222;
  --deficit-warn: #cc8822;
  --deficit-safe: #558844;
  --highlight:    #f0d060;
  --selected:     #d4a840;

  /* — Window Backgrounds (time of day) — */
  --window-morning:   #87CEEB;
  --window-afternoon: #f5d89a;
  --window-evening:   #2c1810;
  --window-night:     #0a0a14;

  /* — Question Archetype Colors — */
  --q-friendly:   #558844;
  --q-direct:     #cc8822;
  --q-pressure:   #cc2222;
  --q-silence:    #4466aa;

  /* — Typography — */
  --font-headline: 'Special Elite', cursive;
  --font-body:     'Courier Prime', monospace;
  --font-numbers:  'Bebas Neue', sans-serif;

  /* — Spacing (pixel-grid aligned) — */
  --sp-1: 4px;
  --sp-2: 8px;
  --sp-3: 12px;
  --sp-4: 16px;
  --sp-5: 20px;
  --sp-6: 24px;
  --sp-8: 32px;
  --sp-16: 64px;

  /* — Canvas — */
  --canvas-w: 640px;
  --canvas-h: 360px;
  --hud-h: 34px;
}

/* ============================================
   RESET & BASE
   ============================================ */
*, *::before, *::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html, body {
  width: 100%;
  height: 100%;
  overflow: hidden;
  background: #0a0a0a;
  font-family: var(--font-body);
  color: var(--ink);
  -webkit-font-smoothing: none;
  -moz-osx-font-smoothing: unset;
}

/* ============================================
   GAME WRAPPER — Holds HUD + canvas, scaled
   ============================================ */
#game-wrapper {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) scale(var(--scale, 1));
  transform-origin: center center;
  width: var(--canvas-w);
  background: var(--desk);
  image-rendering: pixelated;
  image-rendering: -moz-crisp-edges;
  image-rendering: crisp-edges;
}

/* ============================================
   GAME CANVAS — 640×360 content area
   ============================================ */
#game-canvas {
  width: var(--canvas-w);
  height: var(--canvas-h);
  position: relative;
  overflow: hidden;
  background: var(--desk);
}

/* ============================================
   SCREEN MANAGEMENT
   ============================================ */
#screen-container {
  width: 100%;
  height: 100%;
  position: relative;
}

.screen {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: none;
  overflow: hidden;
}

.screen.active {
  display: flex;
  flex-direction: column;
}

/* ============================================
   FLASH OVERLAY (hard cuts)
   ============================================ */
#flash-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: #fff;
  opacity: 0;
  pointer-events: none;
  z-index: 999;
}

#flash-overlay.flash {
  animation: flash-cut 300ms ease-out;
}

@keyframes flash-cut {
  0%   { opacity: 0.6; background: #f5e4a0; }
  30%  { opacity: 0.4; background: #fff; }
  100% { opacity: 0; background: #fff; }
}

/* Persistent UI is now #hud-bar — styled in components.css */

/* ============================================
   SHARED BUTTON STYLES
   ============================================ */
button {
  font-family: var(--font-body);
  cursor: pointer;
  border: none;
  outline: none;
  image-rendering: pixelated;
}

.btn-paper {
  background: var(--paper);
  color: var(--ink);
  border: 2px solid var(--ink);
  padding: var(--sp-2) var(--sp-4);
  font-family: var(--font-body);
  font-size: 12px;
  position: relative;
  /* Physical raised look */
  box-shadow:
    0 3px 0 #1a1208,
    0 4px 6px rgba(0,0,0,0.3);
  transform: translateY(0);
  transition: transform 60ms ease, box-shadow 60ms ease, background 0.1s;
}

.btn-paper:hover {
  background: var(--paper-aged);
  box-shadow:
    0 3px 0 #1a1208,
    0 5px 8px rgba(0,0,0,0.35);
  transform: translateY(-1px);
}

.btn-paper:active {
  background: var(--paper-dark);
  /* Pressed — physically pushed into desk */
  box-shadow:
    0 1px 0 #1a1208,
    0 1px 2px rgba(0,0,0,0.3);
  transform: translateY(2px);
  transition: transform 30ms ease, box-shadow 30ms ease;
}

/* ============================================
   SHARED TEXT STYLES
   ============================================ */
.text-headline {
  font-family: var(--font-headline);
  font-size: 16px;
  letter-spacing: 0.5px;
}

.text-body {
  font-family: var(--font-body);
  font-size: 11px;
  line-height: 1.4;
}

.text-small {
  font-family: var(--font-body);
  font-size: 9px;
  line-height: 1.3;
}

.text-number {
  font-family: var(--font-numbers);
  letter-spacing: 1px;
}

/* ============================================
   TYPEWRITER CURSOR
   ============================================ */
.typewriter-cursor::after {
  content: '█';
  animation: blink 0.6s infinite;
  color: var(--ink);
}

@keyframes blink {
  0%, 100% { opacity: 1; }
  50%      { opacity: 0; }
}

/* ============================================
   SELECTION DISABLED (game feel)
   ============================================ */
#game-wrapper * {
  user-select: none;
  -webkit-user-select: none;
}

/* ============================================
   RUBBER STAMP EFFECT — Papers Please style
   ============================================ */
@keyframes stamp-hit {
  0%   { transform: rotate(-8deg) scale(2.5); opacity: 0; }
  30%  { transform: rotate(-8deg) scale(0.95); opacity: 0.9; }
  50%  { transform: rotate(-8deg) scale(1.05); opacity: 0.85; }
  70%  { transform: rotate(-8deg) scale(1); opacity: 0.8; }
  100% { transform: rotate(-8deg) scale(1); opacity: 0; }
}

.stamp-flash {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) rotate(-8deg) scale(2.5);
  font-family: var(--font-headline);
  font-size: 28px;
  color: var(--deficit-red);
  border: 3px solid var(--deficit-red);
  padding: 2px 12px;
  letter-spacing: 4px;
  text-transform: uppercase;
  pointer-events: none;
  z-index: 100;
  opacity: 0;
  animation: stamp-hit 0.7s cubic-bezier(0.22, 0.61, 0.36, 1) forwards;
}

.stamp-flash.green {
  color: var(--deficit-safe);
  border-color: var(--deficit-safe);
}

/* ============================================
   FILM GRAIN OVERLAY — 70s CRT feel
   ============================================ */
#game-canvas::after {
  content: '';
  position: absolute;
  inset: 0;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
  opacity: 0.025;
  pointer-events: none;
  z-index: 998;
  mix-blend-mode: overlay;
}

/* ============================================
   CURSOR — Game feel
   ============================================ */
#game-canvas {
  cursor: default;
}

#game-canvas button,
#game-canvas .lead-card,
#game-canvas .headline-option {
  cursor: pointer;
}
